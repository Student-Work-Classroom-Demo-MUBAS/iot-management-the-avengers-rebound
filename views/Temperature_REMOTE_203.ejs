<%- include('partials/header') %>
<%- include('partials/sidebar') %>

<div class="main-content">
  <div class="header">
    <div class="page-title">
      <h2>Temperature</h2>
      <p>Monitor indoor and outdoor temperatures and humidity</p>
    </div>
    <div class="actions">
      <button class="btn"><i class="fas fa-sync"></i> Refresh</button>
    </div>
  </div>

  <div class="dashboard-cards">
    <div class="card temp">
      <div class="card-header">
        <div class="card-title">Indoor</div>
        <div class="card-icon temp-icon"><i class="fas fa-temperature-high"></i></div>
      </div>
      <div class="card-value"><%= data.temperature.indoor.value %></div>
      <div class="card-footer">
        <span>Humidity: <%= data.temperature.indoor.humidity %></span>
        <span>Comfort: <%= data.temperature.indoor.comfort %></span>
      </div>
    </div>

    <div class="card temp">
      <div class="card-header">
        <div class="card-title">Outdoor</div>
        <div class="card-icon temp-icon"><i class="fas fa-temperature-low"></i></div>
      </div>
      <div class="card-value"><%= data.temperature.outdoor.value %></div>
      <div class="card-footer">
        <span>Humidity: <%= data.temperature.outdoor.humidity %></span>
        <span>Feels like: <%= data.temperature.outdoor.feelsLike %></span>
      </div>
    </div>

    <div class="card hvac">
      <div class="card-header">
        <div class="card-title">HVAC Status</div>
        <div class="card-icon"><i class="fas fa-fan"></i></div>
      </div>
      <div class="card-value"><%= data.temperature.hvac.mode %></div>
      <div class="card-footer">
        <span>Setpoint: <%= data.temperature.hvac.setpoint %></span>
        <span>Runtime today: <%= data.temperature.hvac.runtimeToday %></span>
      </div>
    </div>
  </div>

  <div class="charts">
    <div class="chart-container">
      <div class="chart-header">
        <div class="chart-title">Temperature Trends</div>
        <div class="chart-actions">
          <button class="chart-btn active">24h</button>
          <button class="chart-btn">7d</button>
        </div>
      </div>
      <canvas id="temperatureTrendChart" height="320"></canvas>
    </div>

    <div class="chart-container">
      <div class="chart-header">
        <div class="chart-title">Humidity Trends</div>
      </div>
      <canvas id="humidityTrendChart" height="320"></canvas>
    </div>
  </div>

  <div class="devices-container">
    <div class="devices-header">
      <div class="devices-title">Room sensors</div>
    </div>
    <table class="device-table">
      <thead>
        <tr>
          <th>Room</th>
          <th>Temp</th>
          <th>Humidity</th>
          <th>Comfort</th>
          <th>Last update</th>
        </tr>
      </thead>
      <tbody>
        <% data.temperature.rooms.forEach(function(r){ %>
          <tr>
            <td><%= r.name %></td>
            <td><%= r.temp %></td>
            <td><%= r.humidity %></td>
            <td><%= r.comfort %></td>
            <td><%= r.lastUpdate %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>