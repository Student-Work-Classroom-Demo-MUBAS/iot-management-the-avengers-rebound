<!-- </div>
    <script src="public\js\charts.js"></script>
</body>
</html> -->

<!-- views/partials/footer.ejs -->

        </main> <!-- Close main content area -->

        <!-- Footer -->
        <footer class="footer" role="contentinfo">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-home"></i>
                        <span>Smart Home</span>
                    </div>
                    <p class="footer-description">
                        Intelligent energy monitoring for modern homes. 
                        Track, analyze, and optimize your energy consumption.
                    </p>
                    <div class="social-links">
                        <a href="#" class="social-link" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Facebook">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="LinkedIn">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="GitHub">
                            <i class="fab fa-github"></i>
                        </a>
                    </div>
                </div>

                <div class="footer-section">
                    <h3 class="footer-heading">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="/">Dashboard</a></li>
                        <li><a href="/energy">Energy Usage</a></li>
                        <li><a href="/temperature">Temperature</a></li>
                        <li><a href="/lighting">Lighting</a></li>
                        <li><a href="/appliances">Appliances</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3 class="footer-heading">Support</h3>
                    <ul class="footer-links">
                        <li><a href="/help">Help Center</a></li>
                        <li><a href="/docs">Documentation</a></li>
                        <li><a href="/api-docs">API Reference</a></li>
                        <li><a href="/contact">Contact Us</a></li>
                        <li><a href="/status">System Status</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3 class="footer-heading">Legal</h3>
                    <ul class="footer-links">
                        <li><a href="/privacy">Privacy Policy</a></li>
                        <li><a href="/terms">Terms of Service</a></li>
                        <li><a href="/cookies">Cookie Policy</a></li>
                        <li><a href="/security">Security</a></li>
                        <li><a href="/compliance">Compliance</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3 class="footer-heading">Newsletter</h3>
                    <p class="footer-newsletter-text">
                        Stay updated with energy saving tips and product updates.
                    </p>
                    <form class="newsletter-form" id="newsletterForm">
                        <div class="input-group">
                            <input 
                                type="email" 
                                placeholder="Enter your email" 
                                class="newsletter-input"
                                aria-label="Email for newsletter"
                                required
                            >
                            <button type="submit" class="newsletter-btn" aria-label="Subscribe to newsletter">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </form>
                    <div class="newsletter-message" id="newsletterMessage" style="display: none;"></div>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <div class="copyright">
                        &copy; 2024 Smart Home Energy Monitoring System. All rights reserved.
                    </div>
                    <div class="footer-stats">
                        <span class="stat">
                            <i class="fas fa-server"></i>
                            <span id="uptime-stat">System: <span class="stat-value">Online</span></span>
                        </span>
                        <span class="stat">
                            <i class="fas fa-database"></i>
                            <span id="db-stat">Database: <span class="stat-value">Connected</span></span>
                        </span>
                        <span class="stat">
                            <i class="fas fa-clock"></i>
                            <span id="time-stat"><span class="stat-value"><%= new Date().toLocaleTimeString() %></span></span>
                        </span>
                    </div>
                </div>
            </div>
        </footer>

    </div> <!-- Close container div -->

    <!-- Scripts -->
    <script src="/js/charts.js"></script>
    
    <!-- Dynamic script loading based on page -->
    <% if (currentPage === 'dashboard' || currentPage === 'energy' || currentPage === 'temperature') { %>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="/js/chart-config.js"></script>
    <% } %>
    
    <% if (typeof additionalScripts !== 'undefined') { %>
        <% additionalScripts.forEach(function(script) { %>
            <script src="<%= script %>"></script>
        <% }); %>
    <% } %>

    <!-- Socket.io -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- System monitoring script -->
    <script src="/js/system-monitor.js"></script>

    <!-- Initialize system -->
    <script>
        // Initialize system monitoring
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize system stats
            if (typeof SystemMonitor !== 'undefined') {
                const monitor = new SystemMonitor();
                monitor.startMonitoring();
            }

            // Initialize newsletter form
            const newsletterForm = document.getElementById('newsletterForm');
            if (newsletterForm) {
                newsletterForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const email = this.querySelector('input[type="email"]').value;
                    const messageEl = document.getElementById('newsletterMessage');
                    
                    // Simple validation
                    if (!email || !email.includes('@')) {
                        showNewsletterMessage('Please enter a valid email address', 'error');
                        return;
                    }

                    // Simulate subscription
                    showNewsletterMessage('Subscribing...', 'info');
                    
                    setTimeout(() => {
                        showNewsletterMessage('Thank you for subscribing!', 'success');
                        this.reset();
                    }, 1000);
                });
            }

            function showNewsletterMessage(message, type) {
                const messageEl = document.getElementById('newsletterMessage');
                messageEl.textContent = message;
                messageEl.className = `newsletter-message ${type}`;
                messageEl.style.display = 'block';
                
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, 5000);
            }

            // Update time every minute
            function updateTime() {
                const timeElement = document.getElementById('time-stat');
                if (timeElement) {
                    const now = new Date();
                    timeElement.querySelector('.stat-value').textContent = 
                        now.toLocaleTimeString('en-US', { 
                            hour: '2-digit', 
                            minute: '2-digit',
                            hour12: true 
                        });
                }
            }
            
            setInterval(updateTime, 60000);
        });

        // Error handling for failed resources
        window.addEventListener('error', function(e) {
            console.error('Script loading error:', e.error);
        });

        // Service Worker Registration (for PWA)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => {
                    console.log('SW registered: ', registration);
                })
                .catch(registrationError => {
                    console.log('SW registration failed: ', registrationError);
                });
        }
    </script>

    <!-- Analytics (optional) -->
    <% if (process.env.NODE_ENV === 'production') { %>
        <script>
            // Google Analytics or other analytics
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-XXXXX-Y', 'auto');
            ga('send', 'pageview');
        </script>
    <% } %>
</body>
</html>